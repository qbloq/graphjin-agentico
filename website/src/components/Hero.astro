---
import GraphField from './react/GraphField';
---

<section class="relative min-h-screen flex flex-col pt-20 overflow-hidden">
  {/* Background image with overlay */}
  <div class="absolute inset-0 z-0" style="background-image: url('/assets/bg2.webp'); background-size: cover; background-position: center;"></div>
  <div class="absolute inset-0 z-0 bg-gradient-to-b from-orange-500/80 via-black/10 to-black/5"></div>

  {/* Particle background */}
  <GraphField client:load />

  <div class="container-wide w-full z-10 flex-1 flex flex-col items-center justify-between py-16 text-center">
    {/* Top section - Label */}
    <div class="mb-auto">
      <span class="text-lg font-mono tracking-[0.2em] text-white/50 uppercase" style="text-shadow: 0 1px 12px rgba(0,0,0,0.6)">
        A NEW KIND OF COMPILER
      </span>
    </div>

    {/* Middle section - Main headline */}
    <div class="my-auto flex flex-col items-center">
      <h1 class="text-7xl md:text-8xl lg:text-[10rem] font-display font-bold text-gj-text tracking-tight leading-[0.9] text-white" style="text-shadow: 0 2px 40px rgba(0,0,0,0.5), 0 0 80px rgba(0,0,0,0.3)">
        GraphJin
      </h1>
      <p class="text-3xl md:text-4xl lg:text-5xl font-display font-bold tracking-tight mt-2 bg-clip-text text-transparent bg-gradient-to-r from-yellow-500 via-teal-200 to-violet-300" style="text-shadow: 0 2px 20px rgba(0,0,0,0.4)">
        Connect AI to Your Databases
      </p>
      <p class="text-xl md:text-2xl font-display tracking-tight mt-1 text-white/50" style="text-shadow: 0 2px 20px rgba(0,0,0,0.4)">
        Use with Claude Desktop + MCP
      </p>
      <div class="mt-6 w-full max-w-4xl px-4">
        <div class="flex items-center justify-between gap-3 bg-black rounded-lg px-5 py-3 font-mono text-sm md:text-base shadow-lg border border-white/10">
          <div class="min-w-0 flex items-center gap-3">
            <span class="text-gray-500 select-none">$</span>
            <code id="hero-command" class="text-white break-all">npx graphjin serve</code>
            <span id="hero-command-hint" class="text-gray-500 text-xs ml-2 hidden sm:inline">// run without install</span>
          </div>
          <button
            id="hero-copy-cmd"
            type="button"
            class="text-gray-400 hover:text-white transition-colors cursor-pointer"
            aria-label="Copy command to clipboard"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>

        <div class="mt-2 inline-flex items-center gap-1 rounded-lg border border-white/15 bg-gray-950/85 p-1 font-mono text-xs md:text-sm shadow-lg">
          <button
            type="button"
            data-hero-cmd-tab="npx"
            class="rounded-md px-2.5 py-1 text-white bg-white/10 transition-colors"
            aria-pressed="true"
          >
            npx
          </button>
          <button
            type="button"
            data-hero-cmd-tab="brew"
            class="rounded-md px-2.5 py-1 text-white/60 hover:text-white transition-colors"
            aria-pressed="false"
          >
            brew
          </button>
          <button
            type="button"
            data-hero-cmd-tab="curl"
            class="rounded-md px-2.5 py-1 text-white/60 hover:text-white transition-colors"
            aria-pressed="false"
          >
            curl
          </button>
        </div>
      </div>
      <script>
        const heroCommands = {
          npx: {
            command: 'npx graphjin serve',
            hint: '// run without install',
          },
          brew: {
            command: 'brew install dosco/graphjin/graphjin && graphjin serve',
            hint: '// install with Homebrew',
          },
          curl: {
            command: 'curl -fsSL https://graphjin.com/install.sh | bash && graphjin serve',
            hint: '// install with script',
          },
        } as const;

        type HeroCommandId = keyof typeof heroCommands;

        const tabButtons = Array.from(document.querySelectorAll('[data-hero-cmd-tab]')) as HTMLButtonElement[];
        const commandEl = document.getElementById('hero-command');
        const hintEl = document.getElementById('hero-command-hint');
        const copyBtn = document.getElementById('hero-copy-cmd');
        const copyIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
        const checkIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';

        let activeCommand: HeroCommandId = 'npx';

        const setActiveTab = (id: HeroCommandId) => {
          activeCommand = id;

          if (commandEl) commandEl.textContent = heroCommands[id].command;
          if (hintEl) hintEl.textContent = heroCommands[id].hint;

          tabButtons.forEach((btn) => {
            const isActive = btn.dataset.heroCmdTab === id;
            btn.classList.toggle('bg-white/10', isActive);
            btn.classList.toggle('text-white', isActive);
            btn.classList.toggle('text-white/60', !isActive);
            btn.classList.toggle('hover:text-white', !isActive);
            btn.setAttribute('aria-pressed', String(isActive));
          });
        };

        tabButtons.forEach((btn) => {
          btn.addEventListener('click', () => {
            const id = btn.dataset.heroCmdTab as HeroCommandId | undefined;
            if (!id) return;
            setActiveTab(id);
          });
        });

        copyBtn?.addEventListener('click', async (e) => {
          const btn = e.currentTarget as HTMLButtonElement;
          await navigator.clipboard.writeText(heroCommands[activeCommand].command);
          btn.innerHTML = checkIcon;
          setTimeout(() => {
            btn.innerHTML = copyIcon;
          }, 2000);
        });
      </script>
    </div>

  </div>

  {/* Scroll indicator */}
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10 animate-bounce">
    <svg class="w-6 h-6 text-white/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </div>
</section>
